(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Ue,M,Rt,ye,it,Bt,$t,Lt,xe,je,Ge,Ce={},Kt=[],Jt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,we=Array.isArray;function _e(e,t){for(var r in t)e[r]=t[r];return e}function Ze(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ze(e,t,r){var n,i,o,u={};for(o in t)o=="key"?n=t[o]:o=="ref"?i=t[o]:u[o]=t[o];if(arguments.length>2&&(u.children=arguments.length>3?Ue.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)u[o]===void 0&&(u[o]=e.defaultProps[o]);return Be(e,u,n,i,null)}function Be(e,t,r,n,i){var o={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Rt,__i:-1,__u:0};return i==null&&M.vnode!=null&&M.vnode(o),o}function be(e){return e.children}function he(e,t){this.props=e,this.context=t}function Se(e,t){if(t==null)return e.__?Se(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Se(e):null}function Ft(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return Ft(e)}}function at(e){(!e.__d&&(e.__d=!0)&&ye.push(e)&&!Le.__r++||it!=M.debounceRendering)&&((it=M.debounceRendering)||Bt)(Le)}function Le(){for(var e,t,r,n,i,o,u,c=1;ye.length;)ye.length>c&&ye.sort($t),e=ye.shift(),c=ye.length,e.__d&&(r=void 0,i=(n=(t=e).__v).__e,o=[],u=[],t.__P&&((r=_e({},n)).__v=n.__v+1,M.vnode&&M.vnode(r),Je(t.__P,r,n,t.__n,t.__P.namespaceURI,32&n.__u?[i]:null,o,i??Se(n),!!(32&n.__u),u),r.__v=n.__v,r.__.__k[r.__i]=r,qt(o,r,u),r.__e!=i&&Ft(r)));Le.__r=0}function Ut(e,t,r,n,i,o,u,c,a,l,p){var s,b,v,E,O,K,I,R=n&&n.__k||Kt,V=t.length;for(a=Xt(r,t,R,a,V),s=0;s<V;s++)(v=r.__k[s])!=null&&(b=v.__i==-1?Ce:R[v.__i]||Ce,v.__i=s,K=Je(e,v,b,i,o,u,c,a,l,p),E=v.__e,v.ref&&b.ref!=v.ref&&(b.ref&&Xe(b.ref,null,v),p.push(v.ref,v.__c||E,v)),O==null&&E!=null&&(O=E),(I=!!(4&v.__u))||b.__k===v.__k?a=Dt(v,a,e,I):typeof v.type=="function"&&K!==void 0?a=K:E&&(a=E.nextSibling),v.__u&=-7);return r.__e=O,a}function Xt(e,t,r,n,i){var o,u,c,a,l,p=r.length,s=p,b=0;for(e.__k=new Array(i),o=0;o<i;o++)(u=t[o])!=null&&typeof u!="boolean"&&typeof u!="function"?(a=o+b,(u=e.__k[o]=typeof u=="string"||typeof u=="number"||typeof u=="bigint"||u.constructor==String?Be(null,u,null,null,null):we(u)?Be(be,{children:u},null,null,null):u.constructor==null&&u.__b>0?Be(u.type,u.props,u.key,u.ref?u.ref:null,u.__v):u).__=e,u.__b=e.__b+1,c=null,(l=u.__i=er(u,r,a,s))!=-1&&(s--,(c=r[l])&&(c.__u|=2)),c==null||c.__v==null?(l==-1&&(i>p?b--:i<p&&b++),typeof u.type!="function"&&(u.__u|=4)):l!=a&&(l==a-1?b--:l==a+1?b++:(l>a?b--:b++,u.__u|=4))):e.__k[o]=null;if(s)for(o=0;o<p;o++)(c=r[o])!=null&&(2&c.__u)==0&&(c.__e==n&&(n=Se(c)),Wt(c,c));return n}function Dt(e,t,r,n){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,t=Dt(i[o],t,r,n));return t}e.__e!=t&&(n&&(t&&e.type&&!t.parentNode&&(t=Se(e)),r.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Ke(e,t){return t=t||[],e==null||typeof e=="boolean"||(we(e)?e.some(function(r){Ke(r,t)}):t.push(e)),t}function er(e,t,r,n){var i,o,u,c=e.key,a=e.type,l=t[r],p=l!=null&&(2&l.__u)==0;if(l===null&&e.key==null||p&&c==l.key&&a==l.type)return r;if(n>(p?1:0)){for(i=r-1,o=r+1;i>=0||o<t.length;)if((l=t[u=i>=0?i--:o++])!=null&&(2&l.__u)==0&&c==l.key&&a==l.type)return u}return-1}function ot(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||Jt.test(t)?r:r+"px"}function Oe(e,t,r,n,i){var o,u;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||ot(e.style,t,"");if(r)for(t in r)n&&r[t]==n[t]||ot(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(Lt,"$1")),u=t.toLowerCase(),t=u in e||t=="onFocusOut"||t=="onFocusIn"?u.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=r,r?n?r.u=n.u:(r.u=xe,e.addEventListener(t,o?Ge:je,o)):e.removeEventListener(t,o?Ge:je,o);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function st(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=xe++;else if(t.t<r.u)return;return r(M.event?M.event(t):t)}}}function Je(e,t,r,n,i,o,u,c,a,l){var p,s,b,v,E,O,K,I,R,V,j,de,re,oe,ne,ce,Y,Z=t.type;if(t.constructor!=null)return null;128&r.__u&&(a=!!(32&r.__u),o=[c=t.__e=r.__e]),(p=M.__b)&&p(t);e:if(typeof Z=="function")try{if(I=t.props,R="prototype"in Z&&Z.prototype.render,V=(p=Z.contextType)&&n[p.__c],j=p?V?V.props.value:p.__:n,r.__c?K=(s=t.__c=r.__c).__=s.__E:(R?t.__c=s=new Z(I,j):(t.__c=s=new he(I,j),s.constructor=Z,s.render=rr),V&&V.sub(s),s.props=I,s.state||(s.state={}),s.context=j,s.__n=n,b=s.__d=!0,s.__h=[],s._sb=[]),R&&s.__s==null&&(s.__s=s.state),R&&Z.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=_e({},s.__s)),_e(s.__s,Z.getDerivedStateFromProps(I,s.__s))),v=s.props,E=s.state,s.__v=t,b)R&&Z.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),R&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(R&&Z.getDerivedStateFromProps==null&&I!==v&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(I,j),!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(I,s.__s,j)===!1||t.__v==r.__v){for(t.__v!=r.__v&&(s.props=I,s.state=s.__s,s.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(f){f&&(f.__=t)}),de=0;de<s._sb.length;de++)s.__h.push(s._sb[de]);s._sb=[],s.__h.length&&u.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(I,s.__s,j),R&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(v,E,O)})}if(s.context=j,s.props=I,s.__P=e,s.__e=!1,re=M.__r,oe=0,R){for(s.state=s.__s,s.__d=!1,re&&re(t),p=s.render(s.props,s.state,s.context),ne=0;ne<s._sb.length;ne++)s.__h.push(s._sb[ne]);s._sb=[]}else do s.__d=!1,re&&re(t),p=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++oe<25);s.state=s.__s,s.getChildContext!=null&&(n=_e(_e({},n),s.getChildContext())),R&&!b&&s.getSnapshotBeforeUpdate!=null&&(O=s.getSnapshotBeforeUpdate(v,E)),ce=p,p!=null&&p.type===be&&p.key==null&&(ce=Ht(p.props.children)),c=Ut(e,we(ce)?ce:[ce],t,r,n,i,o,u,c,a,l),s.base=t.__e,t.__u&=-161,s.__h.length&&u.push(s),K&&(s.__E=s.__=null)}catch(f){if(t.__v=null,a||o!=null)if(f.then){for(t.__u|=a?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;o[o.indexOf(c)]=null,t.__e=c}else{for(Y=o.length;Y--;)Ze(o[Y]);Ve(t)}else t.__e=r.__e,t.__k=r.__k,f.then||Ve(t);M.__e(f,t,r)}else o==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):c=t.__e=tr(r.__e,t,r,n,i,o,u,a,l);return(p=M.diffed)&&p(t),128&t.__u?void 0:c}function Ve(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Ve)}function qt(e,t,r){for(var n=0;n<r.length;n++)Xe(r[n],r[++n],r[++n]);M.__c&&M.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(o){o.call(i)})}catch(o){M.__e(o,i.__v)}})}function Ht(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:we(e)?e.map(Ht):_e({},e)}function tr(e,t,r,n,i,o,u,c,a){var l,p,s,b,v,E,O,K=r.props,I=t.props,R=t.type;if(R=="svg"?i="http://www.w3.org/2000/svg":R=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(l=0;l<o.length;l++)if((v=o[l])&&"setAttribute"in v==!!R&&(R?v.localName==R:v.nodeType==3)){e=v,o[l]=null;break}}if(e==null){if(R==null)return document.createTextNode(I);e=document.createElementNS(i,R,I.is&&I),c&&(M.__m&&M.__m(t,o),c=!1),o=null}if(R==null)K===I||c&&e.data==I||(e.data=I);else{if(o=o&&Ue.call(e.childNodes),K=r.props||Ce,!c&&o!=null)for(K={},l=0;l<e.attributes.length;l++)K[(v=e.attributes[l]).name]=v.value;for(l in K)if(v=K[l],l!="children"){if(l=="dangerouslySetInnerHTML")s=v;else if(!(l in I)){if(l=="value"&&"defaultValue"in I||l=="checked"&&"defaultChecked"in I)continue;Oe(e,l,null,v,i)}}for(l in I)v=I[l],l=="children"?b=v:l=="dangerouslySetInnerHTML"?p=v:l=="value"?E=v:l=="checked"?O=v:c&&typeof v!="function"||K[l]===v||Oe(e,l,v,K[l],i);if(p)c||s&&(p.__html==s.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(s&&(e.innerHTML=""),Ut(t.type=="template"?e.content:e,we(b)?b:[b],t,r,n,R=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,u,o?o[0]:r.__k&&Se(r,0),c,a),o!=null)for(l=o.length;l--;)Ze(o[l]);c||(l="value",R=="progress"&&E==null?e.removeAttribute("value"):E!=null&&(E!==e[l]||R=="progress"&&!E||R=="option"&&E!=K[l])&&Oe(e,l,E,K[l],i),l="checked",O!=null&&O!=e[l]&&Oe(e,l,O,K[l],i))}return e}function Xe(e,t,r){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(i){M.__e(i,r)}}function Wt(e,t,r){var n,i;if(M.unmount&&M.unmount(e),(n=e.ref)&&(n.current&&n.current!=e.__e||Xe(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){M.__e(o,t)}n.base=n.__P=null}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&Wt(n[i],t,r||typeof e.type!="function");r||Ze(e.__e),e.__c=e.__=e.__e=void 0}function rr(e,t,r){return this.constructor(e,r)}function nr(e,t,r){var n,i,o,u;t==document&&(t=document.documentElement),M.__&&M.__(e,t),i=(n=!1)?null:t.__k,o=[],u=[],Je(t,e=t.__k=ze(be,null,[e]),i||Ce,Ce,t.namespaceURI,i?null:t.firstChild?Ue.call(t.childNodes):null,o,i?i.__e:t.firstChild,n,u),qt(o,e,u)}Ue=Kt.slice,M={__e:function(e,t,r,n){for(var i,o,u;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),u=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,n||{}),u=i.__d),u)return i.__E=i}catch(c){e=c}throw e}},Rt=0,he.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=_e({},this.state),typeof e=="function"&&(e=e(_e({},r),this.props)),e&&_e(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),at(this))},he.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),at(this))},he.prototype.render=be,ye=[],Bt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,$t=function(e,t){return e.__v.__b-t.__v.__b},Le.__r=0,Lt=/(PointerCapture)$|Capture$/i,xe=0,je=st(!1),Ge=st(!0);var ir=0;function _(e,t,r,n,i,o){t||(t={});var u,c,a=t;if("ref"in a)for(c in a={},t)c=="ref"?u=t[c]:a[c]=t[c];var l={type:e,props:a,key:r,ref:u,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ir,__i:-1,__u:0,__source:i,__self:o};if(typeof e=="function"&&(u=e.defaultProps))for(c in u)a[c]===void 0&&(a[c]=u[c]);return M.vnode&&M.vnode(l),l}var Pe,G,qe,lt,Fe=0,Qt=[],z=M,ct=z.__b,ut=z.__r,ft=z.diffed,_t=z.__c,ht=z.unmount,dt=z.__;function et(e,t){z.__h&&z.__h(G,e,Fe||t),Fe=0;var r=G.__H||(G.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function x(e){return Fe=1,ar(Gt,e)}function ar(e,t,r){var n=et(Pe++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):Gt(void 0,t),function(c){var a=n.__N?n.__N[0]:n.__[0],l=n.t(a,c);a!==l&&(n.__N=[l,n.__[1]],n.__c.setState({}))}],n.__c=G,!G.__f)){var i=function(c,a,l){if(!n.__c.__H)return!0;var p=n.__c.__H.__.filter(function(b){return!!b.__c});if(p.every(function(b){return!b.__N}))return!o||o.call(this,c,a,l);var s=n.__c.props!==c;return p.forEach(function(b){if(b.__N){var v=b.__[0];b.__=b.__N,b.__N=void 0,v!==b.__[0]&&(s=!0)}}),o&&o.call(this,c,a,l)||s};G.__f=!0;var o=G.shouldComponentUpdate,u=G.componentWillUpdate;G.componentWillUpdate=function(c,a,l){if(this.__e){var p=o;o=void 0,i(c,a,l),o=p}u&&u.call(this,c,a,l)},G.shouldComponentUpdate=i}return n.__N||n.__}function ae(e,t){var r=et(Pe++,3);!z.__s&&jt(r.__H,t)&&(r.__=e,r.u=t,G.__H.__h.push(r))}function vt(e){return Fe=5,or(function(){return{current:e}},[])}function or(e,t){var r=et(Pe++,7);return jt(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function sr(){for(var e;e=Qt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach($e),e.__H.__h.forEach(Ye),e.__H.__h=[]}catch(t){e.__H.__h=[],z.__e(t,e.__v)}}z.__b=function(e){G=null,ct&&ct(e)},z.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),dt&&dt(e,t)},z.__r=function(e){ut&&ut(e),Pe=0;var t=(G=e.__c).__H;t&&(qe===G?(t.__h=[],G.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(t.__h.forEach($e),t.__h.forEach(Ye),t.__h=[],Pe=0)),qe=G},z.diffed=function(e){ft&&ft(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Qt.push(t)!==1&&lt===z.requestAnimationFrame||((lt=z.requestAnimationFrame)||lr)(sr)),t.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),qe=G=null},z.__c=function(e,t){t.some(function(r){try{r.__h.forEach($e),r.__h=r.__h.filter(function(n){return!n.__||Ye(n)})}catch(n){t.some(function(i){i.__h&&(i.__h=[])}),t=[],z.__e(n,r.__v)}}),_t&&_t(e,t)},z.unmount=function(e){ht&&ht(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{$e(n)}catch(i){t=i}}),r.__H=void 0,t&&z.__e(t,r.__v))};var pt=typeof requestAnimationFrame=="function";function lr(e){var t,r=function(){clearTimeout(n),pt&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,35);pt&&(t=requestAnimationFrame(r))}function $e(e){var t=G,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),G=t}function Ye(e){var t=G;e.__c=e.__(),G=t}function jt(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function Gt(e,t){return typeof t=="function"?t(e):t}var He={},ue={},C={},We={},mt;function Ie(){return mt||(mt=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ROOKS=e.SQUARES=e.RANKS=e.RANK_8=e.RANK_7=e.RANK_6=e.RANK_5=e.RANK_4=e.RANK_3=e.RANK_2=e.RANK_1=e.BITS=e.FLAGS=e.SHIFTS=e.RAYS=e.ATTACKS=e.PIECE_OFFSETS=e.PAWN_OFFSETS=e.POSSIBLE_RESULTS=e.DEFAULT_POSITION=e.SYMBOLS=e.EMPTY=e.KING=e.QUEEN=e.ROOK=e.BISHOP=e.KNIGHT=e.PAWN=e.BLACK=e.WHITE=void 0,e.WHITE="w",e.BLACK="b",e.PAWN="p",e.KNIGHT="n",e.BISHOP="b",e.ROOK="r",e.QUEEN="q",e.KING="k",e.EMPTY=-1,e.SYMBOLS="pnbrqkPNBRQK",e.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",e.POSSIBLE_RESULTS=["1-0","0-1","1/2-1/2","*"],e.PAWN_OFFSETS={b:[16,32,17,15],w:[-16,-32,-17,-15]},e.PIECE_OFFSETS={p:[],n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},e.ATTACKS=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],e.RAYS=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],e.SHIFTS={p:0,n:1,b:2,r:3,q:4,k:5},e.FLAGS={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},e.BITS={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},e.RANK_1=7,e.RANK_2=6,e.RANK_3=5,e.RANK_4=4,e.RANK_5=3,e.RANK_6=2,e.RANK_7=1,e.RANK_8=0,e.RANKS=[e.RANK_8,e.RANK_7,e.RANK_6,e.RANK_5,e.RANK_4,e.RANK_3,e.RANK_2,e.RANK_1],e.SQUARES={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},e.ROOKS={w:[{square:e.SQUARES.a1,flag:e.BITS.QSIDE_CASTLE},{square:e.SQUARES.h1,flag:e.BITS.KSIDE_CASTLE}],b:[{square:e.SQUARES.a8,flag:e.BITS.QSIDE_CASTLE},{square:e.SQUARES.h8,flag:e.BITS.KSIDE_CASTLE}]}})(We)),We}var Te={},gt;function tt(){if(gt)return Te;gt=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.State=void 0;var e=Ie(),t=zt(),r=(function(){function n(i,o,u,c,a,l,p){this.board=i||new Array(128),this.kings=o||{w:e.EMPTY,b:e.EMPTY},this.turn=u||e.WHITE,this.castling=c||{w:0,b:0},this.ep_square=a||e.EMPTY,this.half_moves=l||0,this.move_number=p||1}return n.prototype.clone=function(){return new n(this.board.slice(),{w:this.kings.w,b:this.kings.b},this.turn,{w:this.castling.w,b:this.castling.b},this.ep_square,this.half_moves,this.move_number)},Object.defineProperty(n.prototype,"fen",{get:function(){return t.getFen(this)},enumerable:!1,configurable:!0}),n})();return Te.State=r,Te}var H={},yt;function rt(){if(yt)return H;yt=1,Object.defineProperty(H,"__esModule",{value:!0}),H.strippedSan=H.validateFen=H.isFlagKey=H.isSquare=H.isPieceSymbol=H.isColor=H.symbol=H.isDigit=H.swapColor=H.algebraic=H.file=H.rank=void 0;var e=Ie();function t(v){return v>>4}H.rank=t;function r(v){return v&15}H.file=r;function n(v){var E=r(v),O=t(v);return"abcdefgh".substring(E,E+1)+"87654321".substring(O,O+1)}H.algebraic=n;function i(v){return v===e.WHITE?e.BLACK:e.WHITE}H.swapColor=i;function o(v){return/^[0-9]$/.test(v)}H.isDigit=o;function u(v){var E=v.type,O=v.color;return O===e.WHITE?E.toUpperCase():E.toLowerCase()}H.symbol=u;function c(v){return v==="w"||v==="b"}H.isColor=c;function a(v){return/^[pnbrqk]$/.test(v)}H.isPieceSymbol=a;function l(v){return/^[a-h][1-8]$/.test(v)}H.isSquare=l;function p(v){var E=["NORMAL","CAPTURE","BIG_PAWN","EP_CAPTURE","PROMOTION","KSIDE_CASTLE","QSIDE_CASTLE"];return E.indexOf(v)!==-1}H.isFlagKey=p;function s(v){var E={0:"No errors.",1:"FEN string must contain six space-delimited fields.",2:"6th field (move number) must be a positive integer.",3:"5th field (half move counter) must be a non-negative integer.",4:"4th field (en-passant square) is invalid.",5:"3rd field (castling availability) is invalid.",6:"2nd field (side to move) is invalid.",7:"1st field (piece positions) does not contain 8 '/'-delimited rows.",8:"1st field (piece positions) is invalid [consecutive numbers].",9:"1st field (piece positions) is invalid [invalid piece].",10:"1st field (piece positions) is invalid [row too large].",11:"Illegal en-passant square"},O=v.split(/\s+/);if(O.length!==6)return{valid:!1,error_number:1,error:E[1]};if(isNaN(O[5])||parseInt(O[5],10)<=0)return{valid:!1,error_number:2,error:E[2]};if(isNaN(O[4])||parseInt(O[4],10)<0)return{valid:!1,error_number:3,error:E[3]};if(!/^(-|[abcdefgh][36])$/.test(O[3]))return{valid:!1,error_number:4,error:E[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(O[2]))return{valid:!1,error_number:5,error:E[5]};if(!/^(w|b)$/.test(O[1]))return{valid:!1,error_number:6,error:E[6]};var K=O[0].split("/");if(K.length!==8)return{valid:!1,error_number:7,error:E[7]};for(var I=0;I<K.length;I++){for(var R=0,V=!1,j=0;j<K[I].length;j++)if(isNaN(K[I][j])){if(!/^[prnbqkPRNBQK]$/.test(K[I][j]))return{valid:!1,error_number:9,error:E[9]};R+=1,V=!1}else{if(V)return{valid:!1,error_number:8,error:E[8]};R+=parseInt(K[I][j],10),V=!0}if(R!==8)return{valid:!1,error_number:10,error:E[10]}}return O[3][1]=="3"&&O[1]=="w"||O[3][1]=="6"&&O[1]=="b"?{valid:!1,error_number:11,error:E[11]}:{valid:!0,error_number:0,error:E[0]}}H.validateFen=s;function b(v){return v.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}return H.strippedSan=b,H}var bt;function zt(){if(bt)return C;bt=1,Object.defineProperty(C,"__esModule",{value:!0}),C.validateMove=C.getBoard=C.ascii=C.buildMove=C.makeMove=C.insufficientMaterial=C.inStalemate=C.inCheckmate=C.inCheck=C.isKingAttacked=C.isAttacked=C.makePretty=C.sanToMove=C.moveToSan=C.generateMoves=C.removePiece=C.putPiece=C.clonePiece=C.cloneMove=C.getPiece=C.loadPgn=C.getPgn=C.loadFen=C.getFen=C.getDisambiguator=void 0;var e=Ie(),t=tt(),r=rt();function n(f,h,d){for(var g=v(f,{legal:!d}),y=h.from,A=h.to,k=h.piece,T=0,S=0,P=0,$=0,L=g.length;$<L;$++){var Q=g[$].from,F=g[$].to,m=g[$].piece;k===m&&y!==Q&&A===F&&(T++,r.rank(y)===r.rank(Q)&&S++,r.file(y)===r.file(Q)&&P++)}return T>0?S>0&&P>0?r.algebraic(y):P>0?r.algebraic(y).charAt(1):r.algebraic(y).charAt(0):""}C.getDisambiguator=n;function i(f){for(var h=0,d="",g=e.SQUARES.a8;g<=e.SQUARES.h1;g++){var y=f.board[g];if(!y)h++;else{h>0&&(d+=h,h=0);var A=y.color,k=y.type;d+=A===e.WHITE?k.toUpperCase():k.toLowerCase()}g+1&136&&(h>0&&(d+=h),g!==e.SQUARES.h1&&(d+="/"),h=0,g+=8)}var T="";f.castling[e.WHITE]&e.BITS.KSIDE_CASTLE&&(T+="K"),f.castling[e.WHITE]&e.BITS.QSIDE_CASTLE&&(T+="Q"),f.castling[e.BLACK]&e.BITS.KSIDE_CASTLE&&(T+="k"),f.castling[e.BLACK]&e.BITS.QSIDE_CASTLE&&(T+="q"),T=T||"-";var S=f.ep_square===e.EMPTY?"-":r.algebraic(f.ep_square);return[d,f.turn,T,S,f.half_moves,f.move_number].join(" ")}C.getFen=i;function o(f){var h=f.split(/\s+/),d=h[0],g=0;if(!r.validateFen(f).valid)return null;for(var y=new t.State,A=0;A<d.length;A++){var k=d.charAt(A);if(k==="/")g+=8;else if(r.isDigit(k))g+=parseInt(k,10);else{var T=k<"a"?e.WHITE:e.BLACK,S=s(y,{type:k.toLowerCase(),color:T},r.algebraic(g));if(!S)return null;y=S,g++}}return y.turn=h[1]===e.BLACK?e.BLACK:e.WHITE,h[2].indexOf("K")>-1&&(y.castling.w|=e.BITS.KSIDE_CASTLE),h[2].indexOf("Q")>-1&&(y.castling.w|=e.BITS.QSIDE_CASTLE),h[2].indexOf("k")>-1&&(y.castling.b|=e.BITS.KSIDE_CASTLE),h[2].indexOf("q")>-1&&(y.castling.b|=e.BITS.QSIDE_CASTLE),y.ep_square=h[3]==="-"?e.EMPTY:e.SQUARES[h[3]],y.half_moves=parseInt(h[4],10),y.move_number=parseInt(h[5],10),y}C.loadFen=o;function u(f,h,d,g,y){y===void 0&&(y={});var A=y.newline_char,k=A===void 0?`
`:A,T=y.max_width,S=T===void 0?0:T,P=[],$=!1;for(var L in h)P.push("["+L+' "'+h[L]+'"]'+k),$=!0;$&&g.length&&P.push(k);var Q=function(U){var D=d[f.fen];if(typeof D<"u"){var q=U.length>0?" ":"";U=""+U+q+"{"+D+"}"}return U};g[0]&&(f=g[0].state);var F=[],m="";if(g.length===0&&F.push(Q("")),g.forEach(function(U,D){var q=U.move;m=Q(m),D===0&&q.color===e.BLACK?m=f.move_number+". ...":q.color===e.WHITE&&(m.length&&F.push(m),m=f.move_number+"."),m=m+" "+E(f,q),f=oe(f,q)}),m.length&&F.push(Q(m)),typeof h.Result<"u"&&F.push(h.Result),S===0)return P.join("")+F.join(" ");for(var N=function(){return P.length>0&&P[P.length-1]===" "?(P.pop(),!0):!1},w=function(U,D){for(var q=0,ee=D.split(" ");q<ee.length;q++){var J=ee[q];if(J){if(U+J.length>S){for(;N();)U--;P.push(k),U=0}P.push(J),U+=J.length,P.push(" "),U++}}return N()&&U--,U},B=0,L=0;L<F.length;L++){if(B+F[L].length>S&&F[L].includes("{")){B=w(B,F[L]);continue}B+F[L].length>S&&L!==0?(P[P.length-1]===" "&&P.pop(),P.push(k),B=0):L!==0&&(P.push(" "),B++),P.push(F[L]),B+=F[L].length}return P.join("")}C.getPgn=u;function c(f,h){h===void 0&&(h={});var d=h.newline_char,g=d===void 0?`\r?
`:d,y=h.sloppy,A=y===void 0?!1:y,k=function(W){return W.replace(/\\/g,"\\")},T=function(W,X){for(var Ne=X.newline_char,ke={},pe=W.split(new RegExp(k(Ne))),ve="",Ee="",me=0;me<pe.length;me++)ve=pe[me].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),Ee=pe[me].replace(/^\[[A-Za-z]+\s"(.*)" *\]$/,"$1"),ve.trim().length>0&&(ke[ve.trim()]=Ee);return ke},S=new RegExp("^(\\[((?:"+k(g)+")|.)*\\])(?:"+k(g)+"){2}"),P=S.test(f)?S.exec(f)[1]:"",$=o(e.DEFAULT_POSITION),L=T(P,{newline_char:g});if(L.SetUp==="1"&&"FEN"in L){var Q=o(L.FEN);if(!Q)return null;$=Q}for(var F=function(W){return Array.from(W).map(function(X){return X.charCodeAt(0)<128?X.charCodeAt(0).toString(16):encodeURIComponent(X).replace(/%/g,"").toLowerCase()}).join("")},m=function(W){var X;return W.length==0?"":decodeURIComponent("%"+((X=W?.match(/.{1,2}/g))===null||X===void 0?void 0:X.join("%")))},N=function(W){return W=W.replace(new RegExp(k(g),"g")," "),"{"+F(W.slice(1,W.length-1))+"}"},w=function(W){if(W.startsWith("{")&&W.endsWith("}"))return m(W.slice(1,W.length-1))},B=f.replace(P,"").replace(new RegExp("({[^}]*})+?|;([^"+k(g)+"]*)","g"),function(W,X,Ne){return X!==void 0?N(X):" "+N("{"+Ne.slice(1)+"}")}).replace(new RegExp(k(g),"g")," "),U=/(\([^()]+\))+?/g;U.test(B);)B=B.replace(U,"");B=B.replace(/\d+\.(\.\.)?/g,""),B=B.replace(/\.\.\./g,""),B=B.replace(/\$\d+/g,"");for(var D=B.trim().split(new RegExp(/\s+/)).join(",").replace(/,,+/g,",").split(","),q={},ee=[],J=0;J<D.length;J++){var te=D[J],ie=w(te);if(ie!==void 0){q[$.fen]=ie;continue}if(J===D.length-1&&e.POSSIBLE_RESULTS.indexOf(te)!==-1){Object.keys(L).length&&typeof L.Result>"u"&&(L.Result=te);continue}var se=O($,D[J],{sloppy:A});if(se===null)return null;ee.push({move:se,state:$});var Q=oe($,se);if(!Q)return null;$=Q}return[$,L,q,ee]}C.loadPgn=c;function a(f,h){if(!h||(h=h.toLowerCase(),!r.isSquare(h)))return null;var d=e.SQUARES[h],g=f.board[d];return g?p(g):null}C.getPiece=a;function l(f){return{to:f.to,from:f.from,color:f.color,flags:f.flags,piece:f.piece,captured:f.captured,promotion:f.promotion,san:f.san}}C.cloneMove=l;function p(f){return{color:f.color,type:f.type}}C.clonePiece=p;function s(f,h,d){var g=h.type,y=h.color;if(!g||!y||!d||(g=g.toLowerCase(),y=y.toLowerCase(),d=d.toLowerCase(),!r.isPieceSymbol(g)||!r.isColor(y)||!r.isSquare(d)))return null;var A=f.clone(),k=e.SQUARES[d];return g===e.KING&&A.kings[y]!==e.EMPTY&&A.kings[y]!==k?null:(A.board[k]={type:g,color:y},g===e.KING&&(A.kings[y]=k),A)}C.putPiece=s;function b(f,h){if(!h||(h=h.toLowerCase(),!r.isSquare(h)))return null;var d=e.SQUARES[h],g=f.board[d];if(!g)return null;var y=f.clone(),A=g.type,k=g.color;return A===e.KING&&(y.kings[k]=e.EMPTY),delete y.board[d],y}C.removePiece=b;function v(f,h){var d,g;h===void 0&&(h={});var y=h.legal,A=y===void 0?!0:y,k=function(Ne,ke,pe,ve,Ee){var me=Ne[pe];if(me&&me.type===e.PAWN&&(r.rank(ve)===e.RANK_8||r.rank(ve)===e.RANK_1))for(var nt=[e.QUEEN,e.ROOK,e.BISHOP,e.KNIGHT],De=0,Zt=nt.length;De<Zt;De++)ke.push(ne(f,pe,ve,Ee,nt[De]));else ke.push(ne(f,pe,ve,Ee))},T=[],S=f.turn,P=r.swapColor(S),$={b:e.RANK_7,w:e.RANK_2},L=e.SQUARES.a8,Q=e.SQUARES.h1,F=!1,m=h.square;if(m)if(m=m.toLowerCase(),r.isSquare(m))L=Q=e.SQUARES[m],F=!0;else return[];for(var N=L;N<=Q;N++){if(N&136){N+=7;continue}var w=f.board[N];if(!(!w||w.color!==S))if(w.type===e.PAWN){var B=N+e.PAWN_OFFSETS[S][0];if(!f.board[B]){k(f.board,T,N,B,e.BITS.NORMAL);var U=N+e.PAWN_OFFSETS[S][1];$[S]===r.rank(N)&&!f.board[U]&&k(f.board,T,N,U,e.BITS.BIG_PAWN)}for(var D=2;D<4;D++){var q=N+e.PAWN_OFFSETS[S][D];q&136||(f.board[q]&&((d=f.board[q])===null||d===void 0?void 0:d.color)===P?k(f.board,T,N,q,e.BITS.CAPTURE):q===f.ep_square&&k(f.board,T,N,f.ep_square,e.BITS.EP_CAPTURE))}}else for(var D=0,ee=e.PIECE_OFFSETS[w.type].length;D<ee;D++)for(var J=e.PIECE_OFFSETS[w.type][D],te=N;te+=J,!(te&136);){if(!f.board[te])k(f.board,T,N,te,e.BITS.NORMAL);else{if(((g=f.board[te])===null||g===void 0?void 0:g.color)===S)break;k(f.board,T,N,te,e.BITS.CAPTURE);break}if(w.type==="n"||w.type==="k")break}}if(!F||Q===f.kings[S]){if(f.castling[S]&e.BITS.KSIDE_CASTLE){var ie=f.kings[S],se=ie+2;!f.board[ie+1]&&!f.board[se]&&!I(f,P,f.kings[S])&&!I(f,P,ie+1)&&!I(f,P,se)&&k(f.board,T,f.kings[S],se,e.BITS.KSIDE_CASTLE)}if(f.castling[S]&e.BITS.QSIDE_CASTLE){var ie=f.kings[S],se=ie-2;!f.board[ie-1]&&!f.board[ie-2]&&!f.board[ie-3]&&!I(f,P,f.kings[S])&&!I(f,P,ie-1)&&!I(f,P,se)&&k(f.board,T,f.kings[S],se,e.BITS.QSIDE_CASTLE)}}if(!A)return T;for(var W=[],N=0,ee=T.length;N<ee;N++){var X=oe(f,T[N]);R(X,S)||W.push(T[N])}return W}C.generateMoves=v;function E(f,h,d){var g;d===void 0&&(d={});var y=d.sloppy,A=y===void 0?!1:y,k=d.checkPromotion,T=k===void 0?!0:k,S="";if(h.flags&e.BITS.KSIDE_CASTLE)S="O-O";else if(h.flags&e.BITS.QSIDE_CASTLE)S="O-O-O";else{var P=n(f,h,A);h.piece!==e.PAWN&&(S+=h.piece.toUpperCase()+P),h.flags&(e.BITS.CAPTURE|e.BITS.EP_CAPTURE)&&(h.piece===e.PAWN&&(S+=r.algebraic(h.from)[0]),S+="x"),S+=r.algebraic(h.to),T&&h.flags&e.BITS.PROMOTION&&(S+="="+((g=h.promotion)===null||g===void 0?void 0:g.toUpperCase()))}var $=oe(f,h);return V($)&&(j($)?S+="#":S+="+"),S}C.moveToSan=E;function O(f,h,d){d===void 0&&(d={});var g=d.sloppy,y=g===void 0?!1:g,A=d.checkPromotion,k=A===void 0?!0:A,T=r.strippedSan(h),S,P,$,L,Q;y&&(S=T.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),S&&(P=S[1],$=S[2],L=S[3],Q=S[4]));for(var F=v(f,{square:$}),m=0,N=F.length;m<N;m++){var w=E(f,F[m],{checkPromotion:k});if(T===r.strippedSan(w)||y&&T===r.strippedSan(E(f,F[m],d))||$&&L&&r.isSquare($)&&r.isSquare(L)&&S&&(!P||P.toLowerCase()==F[m].piece)&&e.SQUARES[$]==F[m].from&&e.SQUARES[L]==F[m].to&&(!k||!Q||Q.toLowerCase()==F[m].promotion))return F[m]}return null}C.sanToMove=O;function K(f,h){var d=l(h),g="";for(var y in e.BITS)r.isFlagKey(y)&&e.BITS[y]&d.flags&&(g+=e.FLAGS[y]);return{to:r.algebraic(d.to),from:r.algebraic(d.from),color:d.color,flags:g,piece:d.piece,san:E(f,d),captured:d.captured,promotion:d.promotion}}C.makePretty=K;function I(f,h,d){for(var g,y=e.SQUARES.a8;y<=e.SQUARES.h1;y++){if(y&136){y+=7;continue}if(!(f.board[y]==null||((g=f.board[y])===null||g===void 0?void 0:g.color)!==h)){var A=f.board[y],k=y-d,T=k+119;if(A&&e.ATTACKS[T]&1<<e.SHIFTS[A.type]){if(A.type===e.PAWN){if(k>0){if(A.color===e.WHITE)return!0}else if(A.color===e.BLACK)return!0;continue}if(A.type==="n"||A.type==="k")return!0;for(var S=e.RAYS[T],P=y+S,$=!1;P!==d;){if(f.board[P]){$=!0;break}P+=S}if(!$)return!0}}}return!1}C.isAttacked=I;function R(f,h){return I(f,r.swapColor(h),f.kings[h])}C.isKingAttacked=R;function V(f){return R(f,f.turn)}C.inCheck=V;function j(f){return V(f)&&v(f).length===0}C.inCheckmate=j;function de(f){return!V(f)&&v(f).length===0}C.inStalemate=de;function re(f){for(var h={},d=[],g=0,y=0,A=e.SQUARES.a8;A<=e.SQUARES.h1;A++){if(y=(y+1)%2,A&136){A+=7;continue}var k=f.board[A];k&&(h[k.type]=k.type in h?h[k.type]+1:1,k.type===e.BISHOP&&d.push(y),g++)}if(g===2)return!0;if(g===3&&(h[e.BISHOP]===1||h[e.KNIGHT]===1))return!0;if(g===h[e.BISHOP]+2){for(var T=0,S=d.length,A=0;A<S;A++)T+=d[A];if(T===0||T===S)return!0}return!1}C.insufficientMaterial=re;function oe(f,h){var d=f.clone(),g=d.turn,y=r.swapColor(g);d.board[h.to]=d.board[h.from],delete d.board[h.from],h.flags&e.BITS.EP_CAPTURE&&(d.turn===e.BLACK?delete d.board[h.to-16]:delete d.board[h.to+16]),h.flags&e.BITS.PROMOTION&&h.promotion&&r.isPieceSymbol(h.promotion)&&(d.board[h.to]={type:h.promotion,color:g});var A=d.board[h.to];if(A&&A.type===e.KING){if(d.kings[A.color]=h.to,h.flags&e.BITS.KSIDE_CASTLE){var k=h.to-1,T=h.to+1;d.board[k]=d.board[T],delete d.board[T]}else if(h.flags&e.BITS.QSIDE_CASTLE){var k=h.to+1,T=h.to-2;d.board[k]=d.board[T],delete d.board[T]}d.castling[g]=0}if(d.castling[g]){for(var S=0,P=e.ROOKS[g].length;S<P;S++)if(h.from===e.ROOKS[g][S].square&&d.castling[g]&e.ROOKS[g][S].flag){d.castling[g]^=e.ROOKS[g][S].flag;break}}if(d.castling[y]){for(var S=0,P=e.ROOKS[y].length;S<P;S++)if(h.to===e.ROOKS[y][S].square&&d.castling[y]&e.ROOKS[y][S].flag){d.castling[y]^=e.ROOKS[y][S].flag;break}}return h.flags&e.BITS.BIG_PAWN?d.turn==="b"?d.ep_square=h.to-16:d.ep_square=h.to+16:d.ep_square=e.EMPTY,h.piece===e.PAWN||h.flags&(e.BITS.CAPTURE|e.BITS.EP_CAPTURE)?d.half_moves=0:d.half_moves++,d.turn===e.BLACK&&d.move_number++,d.turn=r.swapColor(d.turn),d}C.makeMove=oe;function ne(f,h,d,g,y){var A,k={color:f.turn,from:h,to:d,flags:g,piece:f.board[h].type};return y&&r.isPieceSymbol(y)&&(k.flags|=e.BITS.PROMOTION,k.promotion=y),f.board[d]?k.captured=(A=f.board[d])===null||A===void 0?void 0:A.type:g&e.BITS.EP_CAPTURE&&(k.captured=e.PAWN),k}C.buildMove=ne;function ce(f,h){h===void 0&&(h=`
`);var d=e.RANKS.map(function(g){for(var y=f.slice(g*16,g*16+8),A=[],k=0,T=y;k<T.length;k++){var S=T[k];A.push(S?" "+r.symbol(S)+" ":" . ")}var P=A.join("");return"87654321"[g]+" |"+P+"|"});return["  +------------------------+",d.join(h),"  +------------------------+","    a  b  c  d  e  f  g  h"].join(h)}C.ascii=ce;function Y(f){for(var h=[],d=[],g=e.SQUARES.a8;g<=e.SQUARES.h1;g++){var y=f[g];y==null?d.push(null):d.push({type:y.type,color:y.color}),g+1&136&&(h.push(d),d=[],g+=8)}return h}C.getBoard=Y;function Z(f,h,d){d===void 0&&(d={});var g=d.checkPromotion,y=g===void 0?!0:g;if(typeof h=="string")return O(f,h,d);if(typeof h=="object")for(var A=v(f,{square:h.from}),k=0,T=A;k<T.length;k++){var S=T[k];if(h.from===r.algebraic(S.from)&&h.to===r.algebraic(S.to)&&(!y||!("promotion"in S)||h.promotion===S.promotion))return S}return null}return C.validateMove=Z,C}var St;function cr(){if(St)return ue;St=1;var e=ue&&ue.__assign||function(){return e=Object.assign||function(c){for(var a,l=1,p=arguments.length;l<p;l++){a=arguments[l];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(c[s]=a[s])}return c},e.apply(this,arguments)},t=ue&&ue.__spreadArrays||function(){for(var c=0,a=0,l=arguments.length;a<l;a++)c+=arguments[a].length;for(var p=Array(c),s=0,a=0;a<l;a++)for(var b=arguments[a],v=0,E=b.length;v<E;v++,s++)p[s]=b[v];return p};Object.defineProperty(ue,"__esModule",{value:!0}),ue.Chess=void 0;var r=zt(),n=tt(),i=rt(),o=Ie(),u=(function(){function c(a){if(a===void 0&&(a=o.DEFAULT_POSITION),this._state=new n.State,this._history=[],this._header={},this._comments={},!this.load(a))throw new Error("Error loading fen")}return Object.defineProperty(c.prototype,"state",{get:function(){return this._state.clone()},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"states",{get:function(){return t(this._history.map(function(a){return a.state.clone()}),[this.state])},enumerable:!1,configurable:!0}),c.prototype.load=function(a,l){l===void 0&&(l=!1);var p=r.loadFen(a);return p?(this._state=p,this._history=[],l||(this._header={}),this._comments={},this.updateSetup(),!0):!1},c.prototype.clear=function(a){a===void 0&&(a=!1),this._state=new n.State,this._history=[],a||(this._header={}),this._comments={},this.updateSetup()},c.prototype.reset=function(){this.load(o.DEFAULT_POSITION)},c.prototype.get=function(a){return r.getPiece(this._state,a)},c.prototype.put=function(a,l){var p=r.putPiece(this._state,a,l);return p?(this._state=p,this.updateSetup(),!0):!1},c.prototype.remove=function(a){var l=r.getPiece(this._state,a);if(!l)return null;var p=r.removePiece(this._state,a);return p?(this._state=p,l):null},c.prototype.moves=function(a){var l=this;a===void 0&&(a={});var p=a.square,s=a.verbose,b=s===void 0?!1:s,v=r.generateMoves(this._state,{square:p});return b?v.map(function(E){return r.makePretty(l._state,E)}):v.map(function(E){return r.moveToSan(l._state,E)})},c.prototype.fen=function(){return this._state.fen},c.prototype.inCheck=function(){return r.inCheck(this._state)},c.prototype.inCheckmate=function(){return r.inCheckmate(this._state)},c.prototype.inStalemate=function(){return r.inStalemate(this._state)},c.prototype.insufficientMaterial=function(){return r.insufficientMaterial(this._state)},c.prototype.inThreefoldRepetition=function(){for(var a={},l=function(v){var E=v.fen.split(" ").slice(0,4).join(" ");return a[E]=E in a?a[E]+1:1,a[E]>=3},p=0,s=this._history;p<s.length;p++){var b=s[p].state;if(l(b))return!0}return l(this._state)},c.prototype.inDraw=function(){return this._state.half_moves>=100||this.inStalemate()||this.insufficientMaterial()||this.inThreefoldRepetition()},c.prototype.gameOver=function(){return this.inCheckmate()||this.inDraw()},c.prototype.board=function(){return r.getBoard(this._state.board)},c.prototype.pgn=function(a){return a===void 0&&(a={}),r.getPgn(this._state,this._header,this._comments,this._history,a)},c.prototype.loadPgn=function(a,l){l===void 0&&(l={});var p=r.loadPgn(a,l);if(!p)return!1;var s=p[0],b=p[1],v=p[2],E=p[3];return this._state=s,this._header=b,this._comments=v,this._history=E,!0},c.prototype.header=function(){return this._header},c.prototype.setHeader=function(a){this._header=a},c.prototype.addHeader=function(a,l){this._header[a]=l},c.prototype.removeHeader=function(a){delete this._header[a]},c.prototype.clearHeader=function(){this._header={}},c.prototype.ascii=function(a){return a===void 0&&(a=`
`),r.ascii(this._state.board,a)},c.prototype.turn=function(){return this._state.turn},c.prototype.move=function(a,l){l===void 0&&(l={});var p=r.validateMove(this._state,a,l);if(!p)return null;var s=r.makePretty(this._state,p);return l.dry_run||this.makeMove(p),s},c.prototype.validateMoves=function(a,l){l===void 0&&(l={});for(var p=[],s=this._state,b=0,v=a;b<v.length;b++){var E=v[b],O=r.validateMove(s,E,l);if(!O)return null;p.push(r.makePretty(s,O)),s=r.makeMove(s,O)}return p},c.prototype.isPromotion=function(a,l){l===void 0&&(l={});var p=r.validateMove(this._state,a,e(e({},l),{checkPromotion:!1}));return p?!!(p.flags&o.BITS.PROMOTION):!1},c.prototype.undo=function(){var a=this.undoMove();return a?r.makePretty(this._state,a):null},c.prototype.squareColor=function(a){if(i.isSquare(a)){var l=o.SQUARES[a];return(i.rank(l)+i.file(l))%2===0?"light":"dark"}return null},c.prototype.history=function(a){a===void 0&&(a={});var l=a.verbose,p=l===void 0?!1:l;if(!this._history.length)return[];var s;return p?this._history.map(function(b){var v=b.move;return s=b.state,r.makePretty(s,v)}):this._history.map(function(b){var v=b.move;return s=b.state,r.moveToSan(s,v)})},c.prototype.getComment=function(a){return a=a||this.fen(),this._comments[a]},c.prototype.getComments=function(){var a=this;return this.pruneComments(),Object.keys(this._comments).map(function(l){return{fen:l,comment:a._comments[l]}})},c.prototype.setComment=function(a,l){l=l||this.fen(),this._comments[l]=a.replace("{","[").replace("}","]")},c.prototype.deleteComment=function(a){a=a||this.fen();var l=this._comments[a];return delete this._comments[a],l},c.prototype.deleteComments=function(){var a=this;return this.pruneComments(),Object.keys(this._comments).map(function(l){var p=a._comments[l];return delete a._comments[l],{fen:l,comment:p}})},c.prototype.validateFen=function(a){return i.validateFen(a)},c.prototype.clone=function(){var a=new c;return a._state=this._state,a._history=t(this._history),a._header=e({},this._header),a._comments=e({},this._comments),a},c.prototype.perft=function(a){for(var l=r.generateMoves(this._state,{legal:!1}),p=0,s=this._state.turn,b=0,v=l.length;b<v;b++){if(this.makeMove(l[b]),!this.kingAttacked(s))if(a-1>0){var E=this.perft(a-1);p+=E}else p++;this.undoMove()}return p},c.prototype.updateSetup=function(){var a=this._state.fen;this._history.length>0||(a!==o.DEFAULT_POSITION?(this._header.SetUp="1",this._header.FEN=a):(delete this._header.SetUp,delete this._header.FEN))},c.prototype.pruneComments=function(){var a=this,l={},p=function(b){b in a._comments&&(l[b]=a._comments[b])};this._history.forEach(function(b){var v=b.state;s=v,p(s.fen)});var s=this._state;p(s.fen),this._comments=l},c.prototype.strippedSan=function(a){return a.replace(/=/,"").replace(/[+#]?[?!]*$/,"")},c.prototype.attacked=function(a,l){return r.isAttacked(this._state,a,l)},c.prototype.kingAttacked=function(a){return this.attacked(i.swapColor(a),this._state.kings[a])},c.prototype.makeMove=function(a){this._history.push({move:a,state:this._state}),this._state=r.makeMove(this._state,a)},c.prototype.undoMove=function(){var a=this._history.pop();return a==null?null:(this._state=a.state,a.move)},c})();return ue.Chess=u,ue}var Nt;function ur(){return Nt||(Nt=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=cr();Object.defineProperty(e,"Chess",{enumerable:!0,get:function(){return t.Chess}});var r=tt();Object.defineProperty(e,"State",{enumerable:!0,get:function(){return r.State}});var n=Ie();Object.defineProperty(e,"WHITE",{enumerable:!0,get:function(){return n.WHITE}}),Object.defineProperty(e,"BLACK",{enumerable:!0,get:function(){return n.BLACK}}),Object.defineProperty(e,"PAWN",{enumerable:!0,get:function(){return n.PAWN}}),Object.defineProperty(e,"KNIGHT",{enumerable:!0,get:function(){return n.KNIGHT}}),Object.defineProperty(e,"BISHOP",{enumerable:!0,get:function(){return n.BISHOP}}),Object.defineProperty(e,"ROOK",{enumerable:!0,get:function(){return n.ROOK}}),Object.defineProperty(e,"QUEEN",{enumerable:!0,get:function(){return n.QUEEN}}),Object.defineProperty(e,"KING",{enumerable:!0,get:function(){return n.KING}}),Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return n.EMPTY}}),Object.defineProperty(e,"SQUARES",{enumerable:!0,get:function(){return n.SQUARES}}),Object.defineProperty(e,"FLAGS",{enumerable:!0,get:function(){return n.FLAGS}}),Object.defineProperty(e,"BITS",{enumerable:!0,get:function(){return n.BITS}});var i=rt();Object.defineProperty(e,"rank",{enumerable:!0,get:function(){return i.rank}}),Object.defineProperty(e,"file",{enumerable:!0,get:function(){return i.file}}),Object.defineProperty(e,"algebraic",{enumerable:!0,get:function(){return i.algebraic}})})(He)),He}var ge=ur();const fr="3.1.1";class le{constructor(t,r){this._currentBannedMove=null,this._history=[],this._ply=1,this._indicatorConfig={pgn:!0,serialization:!0,san:!0},this.chess=new ge.Chess,r?this.loadFromPGN(r):t&&this.loadFromFEN(t)}getPly(){return this._ply}getActivePlayer(){switch((this._ply-1)%4+1){case 1:return"black";case 2:return"white";case 3:return"white";case 4:return"black";default:return"black"}}getActionType(){return this._ply%2===1?"ban":"move"}get turn(){return this.getActivePlayer()}get currentBannedMove(){return this._currentBannedMove}nextActionType(){return this.getActionType()}play(t){try{return"ban"in t?this.playBan(t.ban):this.playMove(t.move)}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}playBan(t){if(this.gameOver())return{success:!1,error:"Game is over"};if(this.getActionType()!=="ban")return{success:!1,error:"Expected a move, not a ban"};if(!this.legalBans().some(v=>v.from===t.from&&v.to===t.to))return{success:!1,error:`Invalid ban: ${t.from}-${t.to}`};this._currentBannedMove=t;const i=new ge.Chess(this.chess.fen()),u=i.moves({verbose:!0}).filter(v=>!(v.from===t.from&&v.to===t.to)),c=u.length===0&&i.inCheck(),a=u.length===0&&!i.inCheck(),l=i.inCheck()&&u.length>0,p={check:l,checkmate:c,stalemate:a,gameOver:c||a,banCausedCheckmate:c,banCausedStalemate:a};let s=`${t.from}${t.to}`;this._indicatorConfig.san&&(c?s+="#":a?s+="=":l&&(s+="+"));const b={ply:this._ply,player:this.getActivePlayer(),actionType:"ban",action:t,fen:this.fen(),bannedMove:t,san:s,flags:p};return this._history.push(b),this._ply++,{success:!0,action:{ban:t},san:this._indicatorConfig.san?s:`${t.from}${t.to}`,newFen:this.fen(),flags:p,check:p.check,checkmate:p.checkmate,stalemate:p.stalemate,gameOver:p.gameOver,draw:p.draw}}playMove(t){if(this.gameOver())return{success:!1,error:"Game is over"};if(this.getActionType()!=="move")return{success:!1,error:"Expected a ban, not a move"};if(this.isBannedMove(t))return{success:!1,error:`Move ${t.from}-${t.to} is banned`};const r=this.chess.move({from:t.from,to:t.to,promotion:t.promotion});if(!r)return{success:!1,error:`Invalid move: ${t.from}-${t.to}`};const n={check:this.chess.inCheck(),checkmate:this.chess.inCheckmate(),stalemate:this.chess.inStalemate(),draw:this.chess.inDraw(),gameOver:this.chess.gameOver(),insufficientMaterial:this.chess.insufficientMaterial(),threefoldRepetition:this.chess.inThreefoldRepetition(),fiftyMoveRule:this.chess.inDraw()&&!this.chess.inStalemate()&&!this.chess.insufficientMaterial()},i={ply:this._ply,player:this.getActivePlayer(),actionType:"move",action:t,san:r.san,fen:this.fen(),bannedMove:this._currentBannedMove,flags:n};this._history.push(i),this._currentBannedMove=null,this._ply++;let o=r.san;return!this._indicatorConfig.san&&o&&(o=o.replace(/[+#=]$/,"")),{success:!0,action:{move:t},san:o,newFen:this.fen(),flags:n,check:n.check,checkmate:n.checkmate,stalemate:n.stalemate,gameOver:n.gameOver,draw:n.draw}}isBannedMove(t){return this._currentBannedMove?this._currentBannedMove.from===t.from&&this._currentBannedMove.to===t.to:!1}getLegalActions(){return this.gameOver()?[]:this.getActionType()==="ban"?this.legalBans().map(t=>({ban:t})):this.legalMoves().map(t=>({move:t}))}legalMoves(){if(this.gameOver())return[];if(this.getActionType()!=="move")return[];const r=this.chess.moves({verbose:!0}).map(n=>({from:n.from,to:n.to,promotion:n.promotion}));return this._currentBannedMove?r.filter(n=>!this.isBannedMove(n)):r}legalBans(){if(this.gameOver())return[];if(this.getActionType()!=="ban")return[];const r=new ge.Chess(this.chess.fen()).moves({verbose:!0}),n=new Map;return r.forEach(i=>{const o=`${i.from}-${i.to}`;n.has(o)||n.set(o,{from:i.from,to:i.to})}),Array.from(n.values())}inCheck(){return this.chess.inCheck()}inCheckmate(){return this.chess.inCheckmate()}inStalemate(){return this.chess.inStalemate()}gameOver(){return this.inCheckmate()||this.inStalemate()||this.inDraw()}inDraw(){return this.chess.inDraw()}inThreefoldRepetition(){return this.chess.inThreefoldRepetition()}insufficientMaterial(){return this.chess.insufficientMaterial()}currentPlayer(){return this.turn}setIndicatorConfig(t){this._indicatorConfig={...this._indicatorConfig,...t}}getIndicatorConfig(){return{...this._indicatorConfig}}nextMoveColor(){return this.chess.turn()==="w"?"white":"black"}getGameIndicator(){const t=this.getGameFlags();return t.checkmate?"#":t.stalemate||t.draw?"=":t.check?"+":""}getGameFlags(){const t=this._history[this._history.length-1],r=t?.flags?.banCausedCheckmate||!1,n=t?.flags?.banCausedStalemate||!1;return{check:this.chess.inCheck(),checkmate:this.chess.inCheckmate(),stalemate:this.chess.inStalemate(),draw:this.chess.inDraw(),gameOver:this.chess.gameOver(),insufficientMaterial:this.chess.insufficientMaterial(),threefoldRepetition:this.chess.inThreefoldRepetition(),fiftyMoveRule:this.chess.inDraw()&&!this.chess.inStalemate()&&!this.chess.insufficientMaterial()&&!this.chess.inThreefoldRepetition(),banCausedCheckmate:r,banCausedStalemate:n}}fen(){const t=this.chess.fen();let r=this._ply.toString();this._currentBannedMove&&(r+=`:${this._currentBannedMove.from}${this._currentBannedMove.to}`);const n=this.getGameIndicator();return r+=n,`${t} ${r}`}pgn(){let t="",r="";for(let n=0;n<this._history.length;n++){const i=this._history[n];let o=1;if(i.actionType==="move"&&(i.player==="white"?o=Math.floor((i.ply-2)/4)+1:o=Math.floor((i.ply-4)/4)+1),i.actionType==="ban"){const u=i.action;let c=`${u.from}${u.to}`;if(this._indicatorConfig.pgn&&i.san){const a=i.san.match(/[+#=]$/)?.[0];a&&(c+=a)}r+=`{banning: ${c}} `}else{i.player==="white"&&(r=`${o}. ${r}`);let u=i.san||"";!this._indicatorConfig.pgn&&u&&(u=u.replace(/[+#=]$/,"")),r+=`${u} `,i.player==="black"&&(t+=r,r="")}}if(r){const n=this._history.length>0?Math.floor((this._history[this._history.length-1].ply+1)/2):1;r.startsWith(`${n}.`)||(r=`${n}. ${r}`),t+=r}if(this._history.length>0){const n=this._history[this._history.length-1];if(n.actionType==="move"&&n.san){if(n.san.endsWith("#")){const i=n.player==="white"?"1-0":"0-1";t=t.trim()+" "+i}}else if(n.actionType==="ban"&&this.gameOver())if(this.inCheckmate()){const i=this.chess.turn()==="w"?"0-1":"1-0";t=t.trim()+" "+i}else this.inStalemate()&&(t=t.trim()+" 1/2-1/2")}return t.trim()}history(){return[...this._history]}reset(){this.chess=new ge.Chess,this._currentBannedMove=null,this._history=[],this._ply=1}ascii(){let t=this.chess.ascii();return this._currentBannedMove&&(t+=`
Banned: ${this._currentBannedMove.from}-${this._currentBannedMove.to}`),t+=`
Ply: ${this._ply} (${this.getActionType()} by ${this.getActivePlayer()})`,t}static serializeAction(t,r){let n;if("ban"in t)n=`b:${t.ban.from}${t.ban.to}`;else{const i=t.move;n=`m:${i.from}${i.to}${i.promotion||""}`}return r&&(n+=r),n}static deserializeAction(t){const r=t.match(/^([bm]):([a-h][1-8])([a-h][1-8])([qrbn])?([+#=])?$/);if(!r)throw new Error(`Invalid serialized action format: ${t}`);const[,n,i,o,u,c]=r;return n==="b"?{ban:{from:i,to:o}}:{move:u?{from:i,to:o,promotion:u}:{from:i,to:o}}}getLastActionSerialized(){if(this._history.length===0)return null;const t=this._history[this._history.length-1],r=t.actionType==="ban"?{ban:t.action}:{move:t.action};if(!this._indicatorConfig.serialization)return le.serializeAction(r);let n;if(t.san){const i=t.san.match(/[+#=]$/);i&&(n=i[0])}return le.serializeAction(r,n)}getSyncState(){return{fen:this.fen(),lastAction:this.getLastActionSerialized()||void 0,ply:this._ply}}playSerializedAction(t){try{const r=le.deserializeAction(t);return this.play(r)}catch(r){return{success:!1,error:r instanceof Error?r.message:"Invalid serialized action"}}}loadFromSyncState(t){this.loadFromFEN(t.fen),this._ply=t.ply}getActionLog(){return this._history.map(t=>{if(t.actionType==="ban"){const r=t.action;let n=`b:${r.from}${r.to}`;if(t.san&&this._indicatorConfig.serialization){const i=t.san.match(/[+#=]$/);i&&(n+=i[0])}return n}else return t.san||`${t.action.from}${t.action.to}`})}getActionHistory(){return this._history.map((t,r)=>{const n=t.actionType==="ban"?{ban:t.action}:{move:t.action};if(!this._indicatorConfig.serialization)return le.serializeAction(n);let i;return t.actionType==="move"?t.san?.endsWith("#")?i="#":t.san?.endsWith("+")&&(i="+"):r===this._history.length-1&&(this.gameOver()?this.inCheckmate()?i="#":this.inStalemate()&&(i="="):this.nextActionType()==="move"&&this.chess.inCheck()&&(i="+")),le.serializeAction(n,i)})}static replayFromActions(t,r){const n=new le(r);for(const i of t){const o=n.playSerializedAction(i);if(!o.success)throw new Error(`Failed to replay action ${i}: ${o.error}`)}return n}loadFromFEN(t){const r=t.split(" ");if(r.length<7){this.chess=new ge.Chess(t);return}const n=r.slice(0,6).join(" ");let i=r[6];if(this.chess=new ge.Chess(n),i&&i!=="-"){const o=i[i.length-1];if((o==="+"||o==="#"||o==="=")&&(i=i.slice(0,-1)),i.includes(":")){const[u,c]=i.split(":");this._ply=parseInt(u,10)||1,c&&c.length>=4&&(this._currentBannedMove={from:c.substring(0,2),to:c.substring(2,4)})}else{const u=parseInt(i,10);if(!isNaN(u))this._ply=u;else if(i.startsWith("b:")||i.startsWith("w:")){const[c,a]=i.split(":");a!=="ban"&&a.length===4&&(this._currentBannedMove={from:a.substring(0,2),to:a.substring(2,4)})}}}}loadFromPGN(t){this.reset();const r=t.match(/\{banning:\s*[a-h][1-8][a-h][1-8]\}|[KQRBN]?[a-h]?[1-8]?x?[a-h][1-8](?:=[QRBN])?[+#]?|\d+\./g);if(r){for(const n of r)if(!/^\d+\.$/.test(n)){if(n.includes("banning:")){const i=n.match(/([a-h][1-8])([a-h][1-8])/);if(i){const o={from:i[1],to:i[2]};this.play({ban:o})}}else if(/^[KQRBN]?[a-h]?[1-8]?x?[a-h][1-8]/.test(n)){const o=this.legalMoves().find(u=>{const a=new ge.Chess(this.chess.fen()).move({from:u.from,to:u.to,promotion:u.promotion});return a&&a.san===n});o&&this.play({move:o})}}}}}le.VERSION=fr;function _r(e,t){for(var r in t)e[r]=t[r];return e}function kt(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function Et(e,t){this.props=e,this.context=t}(Et.prototype=new he).isPureReactComponent=!0,Et.prototype.shouldComponentUpdate=function(e,t){return kt(this.props,e)||kt(this.state,t)};var Tt=M.__b;M.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Tt&&Tt(e)};var hr=M.__e;M.__e=function(e,t,r,n){if(e.then){for(var i,o=t;o=o.__;)if((i=o.__c)&&i.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),i.__c(e,t)}hr(e,t,r,n)};var At=M.unmount;function Vt(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=_r({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return Vt(n,t,r)})),e}function Yt(e,t,r){return e&&r&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return Yt(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=r)),e}function Qe(){this.__u=0,this.o=null,this.__b=null}function xt(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Me(){this.i=null,this.l=null}M.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),At&&At(e)},(Qe.prototype=new he).__c=function(e,t){var r=t.__c,n=this;n.o==null&&(n.o=[]),n.o.push(r);var i=xt(n.__v),o=!1,u=function(){o||(o=!0,r.__R=null,i?i(c):c())};r.__R=u;var c=function(){if(!--n.__u){if(n.state.__a){var a=n.state.__a;n.__v.__k[0]=Yt(a,a.__c.__P,a.__c.__O)}var l;for(n.setState({__a:n.__b=null});l=n.o.pop();)l.forceUpdate()}};n.__u++||32&t.__u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(u,u)},Qe.prototype.componentWillUnmount=function(){this.o=[]},Qe.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Vt(this.__b,r,n.__O=n.__P)}this.__b=null}var i=t.__a&&ze(be,null,e.fallback);return i&&(i.__u&=-33),[ze(be,null,t.__a?null:e.children),i]};var Ct=function(e,t,r){if(++r[1]===r[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(r=e.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.i=r=r[2]}};(Me.prototype=new he).__a=function(e){var t=this,r=xt(t.__v),n=t.l.get(e);return n[0]++,function(i){var o=function(){t.props.revealOrder?(n.push(i),Ct(t,e,n)):i()};r?r(o):o()}},Me.prototype.render=function(e){this.i=null,this.l=new Map;var t=Ke(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.l.set(t[r],this.i=[1,0,this.i]);return e.children},Me.prototype.componentDidUpdate=Me.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,r){Ct(e,r,t)})};var dr=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,vr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,pr=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,mr=/[A-Z0-9]/g,gr=typeof document<"u",yr=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};he.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(he.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Pt=M.event;function br(){}function Sr(){return this.cancelBubble}function Nr(){return this.defaultPrevented}M.event=function(e){return Pt&&(e=Pt(e)),e.persist=br,e.isPropagationStopped=Sr,e.isDefaultPrevented=Nr,e.nativeEvent=e};var kr={enumerable:!1,configurable:!0,get:function(){return this.class}},wt=M.vnode;M.vnode=function(e){typeof e.type=="string"&&(function(t){var r=t.props,n=t.type,i={},o=n.indexOf("-")===-1;for(var u in r){var c=r[u];if(!(u==="value"&&"defaultValue"in r&&c==null||gr&&u==="children"&&n==="noscript"||u==="class"||u==="className")){var a=u.toLowerCase();u==="defaultValue"&&"value"in r&&r.value==null?u="value":u==="download"&&c===!0?c="":a==="translate"&&c==="no"?c=!1:a[0]==="o"&&a[1]==="n"?a==="ondoubleclick"?u="ondblclick":a!=="onchange"||n!=="input"&&n!=="textarea"||yr(r.type)?a==="onfocus"?u="onfocusin":a==="onblur"?u="onfocusout":pr.test(u)&&(u=a):a=u="oninput":o&&vr.test(u)?u=u.replace(mr,"-$&").toLowerCase():c===null&&(c=void 0),a==="oninput"&&i[u=a]&&(u="oninputCapture"),i[u]=c}}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Ke(r.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=Ke(r.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),r.class&&!r.className?(i.class=r.class,Object.defineProperty(i,"className",kr)):(r.className&&!r.class||r.class&&r.className)&&(i.class=i.className=r.className),t.props=i})(e),e.$$typeof=dr,wt&&wt(e)};var It=M.__r;M.__r=function(e){It&&It(e),e.__c};var Ot=M.diffed;M.diffed=function(e){Ot&&Ot(e);var t=e.props,r=e.__e;r!=null&&e.type==="textarea"&&"value"in t&&t.value!==r.value&&(r.value=t.value==null?"":t.value)};const fe=[{id:"classic",name:"Classic",path:"/themes/classic",description:"In Soviet Russia, you don't see the pieces; the pieces see you."},{id:"modern",name:"Modern",path:"/themes/modern",description:"For the spoiled players who like seeing where their pieces are."}],Er=({currentTheme:e,onThemeChange:t})=>{const r=fe.findIndex(o=>o.id===e),n=()=>{const o=r<=0?fe.length-1:r-1;t(fe[o].id)},i=()=>{const o=r>=fe.length-1?0:r+1;t(fe[o].id)};return _("div",{className:"theme-carousel",children:[_("button",{className:"carousel-arrow left",onClick:n,"aria-label":"Previous theme",children:""}),_("div",{className:"carousel-display",children:[_("div",{className:"carousel-header",children:[_("span",{className:"carousel-label",children:"Theme:"}),_("span",{className:"carousel-value",children:fe[r]?.name||"Classic"})]}),_("div",{className:"carousel-description",children:fe[r]?.description})]}),_("button",{className:"carousel-arrow right",onClick:i,"aria-label":"Next theme",children:""})]})};function Tr({engine:e,fen:t,isEngineMove:r,onEngineMove:n}){ae(()=>{r&&e.isReady&&!e.isThinking&&e.findBestMove(t)},[r,t,e.isReady]),ae(()=>{e.bestMove&&r&&n&&n(e.bestMove)},[e.bestMove]),ae(()=>{e.isReady&&!e.isThinking&&(e.analyzePosition(t),e.getStats())},[t,e.isReady,e.isThinking]);const i=u=>Math.abs(u)>=1e4?u>0?"M"+Math.ceil((2e4-u)/2):"-M"+Math.ceil((2e4+u)/2):(u/100).toFixed(2),o=u=>(Math.max(-1e3,Math.min(1e3,u))+1e3)/2e3*100;return _("div",{className:"engine-panel",children:[_("h3",{className:"engine-title",children:[" Ban Chess Engine",e.isThinking&&_("span",{className:"thinking-indicator",children:[_("span",{className:"thinking-dots",children:[_("span",{children:"."}),_("span",{children:"."}),_("span",{children:"."})]}),"Depth ",e.depth]})]}),_("div",{className:"eval-container",children:_("div",{className:"eval-bar",children:[_("div",{className:"eval-bar-fill",style:{width:`${o(e.evaluation)}%`}}),_("div",{className:"eval-score",children:i(e.evaluation)})]})}),_("div",{className:"engine-stats",children:[_("div",{className:"stat",children:[_("span",{className:"stat-label",children:"Depth:"}),_("span",{className:"stat-value",children:e.depth})]}),_("div",{className:"stat",children:[_("span",{className:"stat-label",children:"Nodes:"}),_("span",{className:"stat-value",children:e.nodes.toLocaleString()})]}),e.ttStats&&_("div",{className:"stat",children:[_("span",{className:"stat-label",children:"TT Hit:"}),_("span",{className:"stat-value",children:[(e.ttStats.hitRate*100).toFixed(1),"%"]})]})]}),e.analysis&&_("div",{className:"position-analysis",children:[_("h4",{className:"analysis-title",children:"Position Breakdown"}),_("div",{className:"analysis-grid",children:[_("div",{className:"analysis-item",children:[_("span",{className:"analysis-label",children:"Material:"}),_("span",{className:"analysis-value",children:(e.analysis.material/100).toFixed(1)})]}),_("div",{className:"analysis-item",children:[_("span",{className:"analysis-label",children:"Mobility:"}),_("span",{className:"analysis-value",children:e.analysis.mobility})]}),_("div",{className:"analysis-item",children:[_("span",{className:"analysis-label",children:"King Safety:"}),_("span",{className:"analysis-value",children:e.analysis.kingBanSafety})]}),_("div",{className:"analysis-item",children:[_("span",{className:"analysis-label",children:"Center:"}),_("span",{className:"analysis-value",children:e.analysis.centerControl})]})]})]}),e.pv&&e.pv.length>0&&_("div",{className:"pv-display",children:[_("h4",{className:"pv-title",children:"Best Line"}),_("div",{className:"pv-moves",children:e.pv.map((u,c)=>_("span",{className:"pv-move",children:[c+1,". ","move"in u?`${u.move.from}${u.move.to}`:`${u.ban.from}${u.ban.to}`]},c))})]})]})}function Ar({config:e,onConfigChange:t,isPlaying:r}){const[n,i]=x(!1);ae(()=>{const u=localStorage.getItem("engineConfig");if(u)try{const c=JSON.parse(u);t(c)}catch(c){console.error("Failed to load engine settings:",c)}},[]),ae(()=>{localStorage.setItem("engineConfig",JSON.stringify(e))},[e]);const o=u=>{t({mode:u}),u!=="off"&&i(!0)};return _("div",{className:"engine-settings",children:[_("div",{className:"engine-settings-header",children:[_("h3",{children:" Engine Settings"}),_("button",{className:"btn-toggle",onClick:()=>i(!n),children:n?"":"+"})]}),_("div",{className:"engine-mode-selector",children:[_("button",{className:`engine-mode-btn ${e.mode==="off"?"active":""}`,onClick:()=>o("off"),disabled:r,children:"Off"}),_("button",{className:`engine-mode-btn ${e.mode==="white"?"active":""}`,onClick:()=>o("white"),disabled:r,children:"Play White"}),_("button",{className:`engine-mode-btn ${e.mode==="black"?"active":""}`,onClick:()=>o("black"),disabled:r,children:"Play Black"}),_("button",{className:`engine-mode-btn ${e.mode==="both"?"active":""}`,onClick:()=>o("both"),disabled:r,children:"Engine vs Engine"}),_("button",{className:`engine-mode-btn ${e.mode==="analysis"?"active":""}`,onClick:()=>o("analysis"),disabled:r,children:"Analysis"})]}),n&&e.mode!=="off"&&_("div",{className:"engine-advanced-settings",children:[_("div",{className:"setting-group",children:[_("label",{className:"setting-label",children:"Engine Version"}),_("div",{className:"setting-buttons",children:[_("button",{className:`setting-btn ${e.version==="v1"?"active":""}`,onClick:()=>t({version:"v1"}),disabled:r,children:"Classic (V1)"}),_("button",{className:`setting-btn ${e.version==="v2"?"active":""}`,onClick:()=>t({version:"v2"}),disabled:r,children:"Advanced (V2)"})]})]}),_("div",{className:"setting-group",children:[_("label",{className:"setting-label",children:["Search Depth: ",e.depth]}),_("input",{type:"range",min:"1",max:"10",value:e.depth,onChange:u=>t({depth:parseInt(u.target.value)}),className:"setting-slider",disabled:r}),_("div",{className:"setting-hint",children:e.depth<=3?"Fast":e.depth<=6?"Balanced":"Deep Analysis"})]}),_("div",{className:"setting-group",children:[_("label",{className:"setting-label",children:["Time per Move: ",(e.timeLimit/1e3).toFixed(1),"s"]}),_("input",{type:"range",min:"500",max:"10000",step:"500",value:e.timeLimit,onChange:u=>t({timeLimit:parseInt(u.target.value)}),className:"setting-slider",disabled:r}),_("div",{className:"setting-hint",children:e.timeLimit<=1e3?"Blitz":e.timeLimit<=3e3?"Rapid":"Classical"})]}),_("div",{className:"setting-group",children:[_("label",{className:"setting-checkbox",children:[_("input",{type:"checkbox",checked:e.autoPlay,onChange:u=>t({autoPlay:u.target.checked}),disabled:r}),_("span",{children:"Auto-play moves"})]}),_("label",{className:"setting-checkbox",children:[_("input",{type:"checkbox",checked:e.showEvaluation,onChange:u=>t({showEvaluation:u.target.checked})}),_("span",{children:"Show evaluation"})]})]}),e.mode==="both"&&_("div",{className:"setting-group engine-vs-engine",children:[_("div",{className:"setting-note",children:" vs  Engine will play against itself"}),_("button",{className:"btn btn-primary",disabled:!e.autoPlay,children:e.autoPlay?"Auto-play enabled":"Enable auto-play to start"})]})]})]})}function Cr(e={}){const[t,r]=x({isReady:!1,isThinking:!1,bestMove:null,evaluation:0,depth:0,nodes:0,pv:[],analysis:null,ttStats:null}),n=vt(null),i=vt(e);return ae(()=>{const a=new Worker(new URL("/ban-chess-gui/assets/engineWorker-XQLOo3er.js",import.meta.url),{type:"module"});return a.onmessage=l=>{const{type:p,...s}=l.data;switch(p){case"READY":r(b=>({...b,isReady:!0}));break;case"SEARCH_UPDATE":r(b=>({...b,isThinking:!0,evaluation:s.evaluation,depth:s.depth,nodes:s.nodes,pv:s.pv||[]}));break;case"BEST_MOVE":r(b=>({...b,isThinking:!1,bestMove:s.move,evaluation:s.evaluation,depth:s.depth,nodes:s.nodes,pv:s.pv||[]}));break;case"ANALYSIS":r(b=>({...b,analysis:s.analysis}));break;case"TT_STATS":r(b=>({...b,ttStats:s.stats}));break;case"ERROR":console.error("Engine error:",s.error),r(b=>({...b,isThinking:!1}));break}},a.postMessage({type:"INIT",payload:{depth:e.depth||6,timeLimit:e.timeLimit||3e3,useOpeningBook:e.useOpeningBook!==!1}}),n.current=a,()=>{a.terminate()}},[]),{...t,findBestMove:(a,l)=>{!n.current||!t.isReady||(r(p=>({...p,isThinking:!0})),n.current.postMessage({type:"FIND_BEST_MOVE",payload:{fen:a,timeLimit:l||i.current.timeLimit||3e3}}))},analyzePosition:a=>{!n.current||!t.isReady||n.current.postMessage({type:"ANALYZE_POSITION",payload:{fen:a}})},getStats:()=>{!n.current||!t.isReady||n.current.postMessage({type:"GET_TT_STATS"})},config:i.current}}const Mt="/ban-chess-gui/",Re=["a","b","c","d","e","f","g","h"];function Ae(e,t=100){try{const r=new(window.AudioContext||window.webkitAudioContext),n=r.createOscillator(),i=r.createGain();n.connect(i),i.connect(r.destination),n.frequency.value=e,n.type="sine",i.gain.setValueAtTime(.3,r.currentTime),i.gain.exponentialRampToValueAtTime(.01,r.currentTime+t/1e3),n.start(r.currentTime),n.stop(r.currentTime+t/1e3)}catch{}}function Pr(){const[e]=x(()=>new le),[t,r]=x([]),[n,i]=x(null),[o,u]=x([]),[c,a]=x([]),[l,p]=x(null),[s,b]=x(!1),[v,E]=x(!0),[O,K]=x([]),[,I]=x({}),[R,V]=x(()=>{const m=localStorage.getItem("boardSize");return m?parseInt(m):4}),[j,de]=x(!0),[re,oe]=x(()=>localStorage.getItem("theme")||"classic"),[ne,ce]=x(!1),[Y,Z]=x(()=>{const m=localStorage.getItem("engineConfig");if(m)try{return JSON.parse(m)}catch{}return{mode:"off",depth:6,timeLimit:3e3,version:"v2",autoPlay:!0,showEvaluation:!0}}),f=Cr({depth:Y.depth,timeLimit:Y.timeLimit,useOpeningBook:!0});ae(()=>{d()},[]);const h=(m,N)=>{if(!m)return null;const w=m===m.toUpperCase(),B=m.toUpperCase(),U=fe.find(ee=>ee.id===re)||fe[0],q={K:"King",Q:"Queen",R:"Rook",B:"Bishop",N:"Knight",P:"Pawn"}[B];return q?`${Mt}${U.path}/${w?"white":"black"}/${q}.png`:null};ae(()=>{document.documentElement.style.setProperty("--board-size",`${R}rem`),localStorage.setItem("boardSize",R.toString())},[R]),ae(()=>{localStorage.setItem("theme",re)},[re]);const d=()=>{const w=e.fen().split(" ")[0].split("/").map(B=>{const U=[];for(const D of B)if(isNaN(parseInt(D)))U.push(D);else for(let q=0;q<parseInt(D);q++)U.push(null);return U});r(w),u(e.legalMoves()),a(e.legalBans())},g=(m,N)=>(m+N)%2===0?"square-light":"square-dark",y=(m,N)=>{if(s){const w=m+1;return Re[7-N]+w}else{const w=8-m;return Re[N]+w}},A=m=>n?e.nextActionType()==="move"?o.some(N=>N.from===n&&N.to===m):c.some(N=>N.from===n&&N.to===m):!1,k=m=>e.nextActionType()==="move"?o.some(N=>N.from===m):c.some(N=>N.from===m),T=()=>{const m=Y.mode;if(m==="off"||m==="analysis")return!1;if(m==="both")return!0;const N=e.getActivePlayer();return m==="white"&&N==="white"||m==="black"&&N==="black"},S=(m,N)=>{if(T())return;const w=y(m,N);if(Ae(600,50),!n){k(w)&&i(w);return}if(w===n){i(null);return}if(A(w)){const B=e.nextActionType()==="move"?{move:{from:n,to:w}}:{ban:{from:n,to:w}};P(B)}else k(w)&&i(w)},P=m=>{if(e.play(m).success){e.nextActionType()==="ban"?Ae(800,150):Ae(400,200);const w="move"in m?m.move.from:m.ban.from,B="move"in m?m.move.to:m.ban.to;e.nextActionType()==="move"?K([...O,` ${w}${B}`]):K([...O,`${w}${B}`]),p({from:w,to:B}),d(),i(null),I({}),e.gameOver()&&setTimeout(()=>{Ae(200,500)},200)}},$=m=>{T()&&setTimeout(()=>{P(m),Y.mode==="both"&&Y.autoPlay&&!e.gameOver()&&I({})},500)};ae(()=>{if(!f.isReady||f.isThinking||!Y.autoPlay||!T()||e.gameOver())return;const m=e.fen();f.findBestMove(m,Y.timeLimit)},[f.isReady,f.isThinking,Y.mode,Y.autoPlay,e,t]),ae(()=>{f.bestMove&&T()&&$(f.bestMove)},[f.bestMove]);const L=(m,N)=>s?t[7-m]?.[7-N]:t[m]?.[N],Q=()=>{Ae(1e3,100),e.reset(),i(null),p(null),K([]),d(),I({})},F=(m,N)=>{const w=h(m);if(!w)return null;const B=m===m.toUpperCase();return _("div",{className:"piece-wrapper",children:_("img",{src:w,alt:m,className:`chess-piece ${B?"piece-white":"piece-black"}`})})};return ae(()=>{if(v){const m=e.turn==="black";m!==s&&b(m)}},[e.turn,v]),_("div",{className:"container",children:[_("div",{className:"page-header",children:_("div",{className:"header-content",children:[_("img",{src:`${Mt}logo.png`,alt:"Ban Chess Logo",className:"header-logo"}),_("div",{className:"header-text",children:[_("h1",{className:"page-title",children:"Ban Chess with Engine"}),_("p",{className:"subtitle",children:e.gameOver()?"Game Over":T()?"Engine is thinking...":"Click on a piece to select, then click destination"}),_("p",{className:"version-info",children:["Library v",le.VERSION||"1.2.2"," | Engine v0.1.0"]})]})]})}),_(Ar,{config:Y,onConfigChange:m=>{const N={...Y,...m};Z(N),localStorage.setItem("engineConfig",JSON.stringify(N))},isPlaying:f.isThinking}),_("div",{className:"game-info",children:[_("div",{className:"turn-indicator",children:[_("span",{className:e.turn==="white"?"white-turn":"black-turn",children:["Turn: ",e.turn==="white"?"White":"Black",T()&&" (Engine)"]}),_("span",{className:`dot ${e.turn==="white"?"dot-white":"dot-black"}`})]}),_("div",{className:`action-type ${e.nextActionType()==="ban"?"ban":"move"}`,children:["Next:"," ",e.nextActionType()==="ban"?" Ban a move":" Make a move"]}),e.inCheckmate()&&_("div",{className:"game-status checkmate",children:" Checkmate!"}),e.inCheck()&&!e.inCheckmate()&&_("div",{className:"game-status check",children:" Check!"})]}),_("div",{className:"board-container",children:_("div",{className:"board-wrapper",children:[_("div",{className:"rank-labels",children:Array.from({length:8},(m,N)=>{const w=s?N+1:8-N;return _("div",{children:w},N)})}),_("div",{className:"file-labels",children:Array.from({length:8},(m,N)=>{const w=s?Re[7-N]:Re[N];return _("div",{children:w},N)})}),_("div",{className:"chess-board",children:[0,1,2,3,4,5,6,7].map(m=>[0,1,2,3,4,5,6,7].map(N=>{const w=y(m,N),B=L(m,N),U=w===n,D=n&&A(w),q=e.currentBannedMove&&(e.currentBannedMove.from===w||e.currentBannedMove.to===w),ee=l?.from===w,J=l?.to===w,te=k(w);return _("div",{onClick:()=>S(m,N),className:`board-square ${g(m,N)} ${U?"square-selected":""} ${D?"square-legal-move":""} ${ee?"square-last-move-from":""} ${J?"square-last-move-to":""} ${q?"square-banned":""} ${te&&!U?"square-can-select":""} ${!te&&!D&&n?"square-inactive":""} ${T()?"square-disabled":""}`,children:[B&&F(B),D&&!B&&_("div",{className:"move-dot"}),q&&_("div",{className:"ban-overlay",children:_("div",{className:"ban-x",children:""})})]},`${m}-${N}`)}))})]})}),Y.showEvaluation&&Y.mode!=="off"&&_(Tr,{engine:f,fen:e.fen(),isEngineMove:T(),onEngineMove:$}),_("div",{className:"controls",children:[_("button",{onClick:Q,className:"btn btn-primary",children:"New Game"}),_("button",{onClick:()=>b(!s),className:"btn",children:"Flip Board"}),_("button",{onClick:()=>E(!v),className:`btn ${v?"btn-success":""}`,children:["Auto-flip: ",v?"ON":"OFF"]}),_("button",{onClick:()=>ce(!ne),className:"btn",children:["Debug: ",ne?"ON":"OFF"]})]}),_("div",{className:"controls-section",children:[_("button",{className:"btn btn-secondary controls-toggle",onClick:()=>de(!j),children:j?" Hide Controls":" Show Controls"}),j&&_("div",{className:"controls-panel",children:[_("div",{className:"control-group",children:[_("label",{className:"control-label",children:["Board Size: ",R,"rem"]}),_("input",{type:"range",min:"3",max:"8",step:"0.5",value:R,onChange:m=>V(parseFloat(m.target.value)),className:"control-slider"})]}),_("div",{className:"control-group",children:_(Er,{currentTheme:re,onThemeChange:oe})})]})]}),_("div",{className:"history-section",children:[_("h3",{className:"history-title",children:"Move History"}),_("div",{className:"move-history",children:O.length>0?_("div",{className:"moves-inline",children:O.map((m,N)=>_("span",{className:`move-entry-inline ${m.startsWith("")?"ban-entry":""}`,children:[Math.floor(N/2)+1,".",N%2===0?"":".."," ",m]},N))}):_("div",{className:"move-entry",children:"No moves yet"})})]}),ne&&_("div",{className:"debug-section",children:[_("h3",{className:"debug-title",children:"Debug Information"}),_("div",{className:"debug-content",children:[_("div",{className:"debug-group",children:[_("label",{className:"debug-label",children:"FEN:"}),_("code",{className:"debug-value",children:e.fen()})]}),_("div",{className:"debug-group",children:[_("label",{className:"debug-label",children:"PGN:"}),_("code",{className:"debug-value",children:e.pgn()})]})]})]}),e.gameOver()&&_("div",{className:"game-over",children:[_("h2",{children:"Game Over!"}),_("p",{children:e.inCheckmate()?`Checkmate! ${e.turn==="white"?"Black":"White"} wins!`:"Draw!"})]})]})}function wr(){return _(Pr,{})}nr(_(wr,{}),document.getElementById("app"));
